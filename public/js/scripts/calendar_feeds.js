timely.define(["jquery_timely","domReady","scripts/calendar_feeds/ics/ics_event_handlers","libs/select2_multiselect_helper","libs/tags_select","libs/utils","ai1ec_config","external_libs/jquery_cookie","external_libs/bootstrap/tab","external_libs/bootstrap/alert","external_libs/bootstrap/modal","external_libs/bootstrap/button","external_libs/bootstrap/collapse"],function(e,t,n,r,i,s,o){var u=function(){var t=e(this.hash);r.refresh(t),i.refresh(t)},a=function(t){var n=e(this).attr("href");e.cookie("feeds_active_tab",n)},f=function(){var t=e("#ai1ec-feeds-after"),s=e(".ai1ec_submit_wrapper"),o=e(".ai1ec_file_upload_tags_categories");r.init(t),i.init(t),r.init(s),i.init(s),r.init(o),i.init(o),e("ul.ai1ec-nav a").on("click",a),e("ul.ai1ec-nav a").on("shown",u),e('select[name="cron_freq"]').on("change",function(){e.ajax({url:ajaxurl,type:"POST",data:{action:"ai1ec_feeds_page_post",cron_freq:this.value}})}),e("#ai1ec-ics-modal").on("click",".remove, .keep",n.submit_delete_modal),e(document).on("click","#ai1ec_add_new_ics",n.add_new_feed).on("click",".ai1ec_delete_ics",n.open_delete_modal).on("click",".ai1ec_update_ics",n.update_feed).on("click",".ai1ec_edit_ics",n.edit_feed).on("click","#ai1ec_cancel_ics",n.edit_cancel).on("click",".ai1ec-panel-heading > a",n.edit_cancel).on("blur","#ai1ec_feed_url",n.feed_url_change)},l=function(){e(document).on("click",".ai1ec-suggested-import-event",function(){var t=e(this),n=t.closest("td.ai1ec-suggested-event-import"),r=t.closest("tr").attr("data-event-id");return e("a.ai1ec-suggested-processing",n).removeClass("ai1ec-hidden"),t.addClass("ai1ec-hidden"),e.ajax({url:o.ajax_url,type:"POST",data:{action:"ai1ec_import_suggested_event",ai1ec_event_id:r},success:function(t){e("a.ai1ec-suggested-processing",n).addClass("ai1ec-hidden"),e("a.ai1ec-suggested-remove-event",n).removeClass("ai1ec-hidden")}}),!1}),e(document).on("click",".ai1ec-suggested-remove-event",function(){var t=e(this),n=t.closest("td.ai1ec-suggested-event-import"),r=t.closest("tr").attr("data-event-id");return e("a.ai1ec-suggested-processing",n).removeClass("ai1ec-hidden"),t.addClass("ai1ec-hidden"),e.ajax({url:o.ajax_url,type:"POST",data:{action:"ai1ec_remove_suggested_event",ai1ec_event_id:r},success:function(t){e("a.ai1ec-suggested-processing",n).addClass("ai1ec-hidden"),e("a.ai1ec-suggested-import-event",n).removeClass("ai1ec-hidden")}}),!1})},c=function(){t(function(){s.activate_saved_tab_on_page_load(e.cookie("feeds_active_tab")),f(),l()})};return{start:c}});