timely.define(["jquery_timely","scripts/calendar/posterboard_view"],function(e,t){var n=function(t){var n=e(this),r=n.next(".ai1ec-popup"),i,s,o;if(r.length===0)return;i=r.html(),s=r.attr("class");var u=n.closest("#ai1ec-calendar-view");u.length===0&&(u=e("body")),n.offset().left-u.offset().left>182?o="left":o="right",n.constrained_popover({content:i,title:"",placement:o,trigger:"manual",html:!0,template:'<div class="timely popover '+s+'"><div class="arrow"></div><div class="popover-inner">'+'<div class="popover-content"><div></div></div></div></div></div>',container:n.closest(".ai1ec-popover-boundary")}).constrained_popover("show")},r=function(t){var n=e(t.toElement||t.relatedTarget);n.closest(".ai1ec-popup").length===0&&e(this).constrained_popover("hide")},i=function(t){var n=e(t.toElement||t.relatedTarget);n.closest(".tooltip").length===0&&(e(this).remove(),e("body > .tooltip").remove())},s=function(t){var n=e(this),r={template:'<div class="timely tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"manual"};if(n.is(".ai1ec-category .ai1ec-color-swatch"))return;n.tooltip(r),n.tooltip("show")},o=function(t){var n=e(t.toElement||t.relatedTarget);n.closest(".tooltip").length===0&&e(this).tooltip("hide")},u=function(t){var n=e(t.toElement||t.relatedTarget);n.closest(".ai1ec-tooltip-trigger").length===0&&e(this).remove(),n.closest(".ai1ec-popup").length===0&&e("body > .ai1ec-popup").remove()},a=function(n){t.resize_masonry(),e("html").is("#ie8")};return{handle_popover_over:n,handle_popover_out:r,handle_popover_self_out:i,handle_tooltip_over:s,handle_tooltip_out:o,handle_tooltip_self_out:u,handle_fonts_loaded:a}});